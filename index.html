<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Magic Ductwork</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/libs/CSInterface.js"></script>
    <script src="js/panel.js" defer></script>
</head>
<body>
    <header>
        <h1>Magic Ductwork</h1>
        <p class="subtitle">Illustrator ductwork automation &amp; register ignore helper</p>
    </header>

    <main class="card-grid">

    <section class="card">
        <h2>Run Ductwork Generator</h2>
        <p class="muted">Configure ductwork options, process the selection, or restore stored geometry.</p>

        <div class="option-group">
            <label class="option-row">
                <input type="checkbox" id="skip-ortho-option">
                <span>Skip orthogonalization (<code>MD:NO_ORTHO</code>)</span>
            </label>

            <div class="option-row inline">
                <label for="rotation-input">Rotation override (°):</label>
                <input type="text" id="rotation-input" class="rotation-input" placeholder="auto" inputmode="decimal">
                <button type="button" id="clear-rotation-btn" class="ghost sm">Clear</button>
            </div>

            <label class="option-row">
                <input type="checkbox" id="skip-final-option">
                <span>Skip orthogonalizing final segment into registers</span>
            </label>

            <label class="option-row">
                <input type="checkbox" id="create-register-wires-option">
                <span>Create Register Wires</span>
            </label>
        </div>

        <div class="button-row">
            <button id="process-btn" class="primary">Process Ductwork</button>
            <button id="process-emory-btn" class="primary">Process Ductwork Emory</button>
        </div>
        <div class="button-row">
            <button id="revert-ortho-btn" class="secondary">Revert Pre-Ortho</button>
            <button id="clear-rotation-metadata-btn" class="secondary">Clear Rotation Metadata</button>
        </div>
        <p id="process-status" class="status"></p>
        <p id="revert-status" class="status"></p>
        <p id="clear-rotation-metadata-status" class="status"></p>
    </section>

    <section class="card">
        <h2>Selection Transform</h2>
        <p class="muted">Rotate the selection.</p>

        <div class="button-row wrap">
            <button id="rotate-90-btn" class="secondary">Rotate 90°</button>
            <button id="rotate-45-btn" class="secondary">Rotate 45°</button>
            <button id="rotate-180-btn" class="secondary">Rotate 180°</button>
        </div>

        <!-- Hidden for now - to be revisited later
        <div class="custom-rotation">
            <label for="custom-rotation-input">Custom rotation (°):</label>
            <input type="number" id="custom-rotation-input" placeholder="e.g. 12.5" step="0.1">
            <button id="rotate-custom-btn" class="accent">Apply</button>
        </div>

        <div class="scale-control">
            <div class="scale-header">
                <label for="scale-slider">Scale selection</label>
                <span id="scale-label">100%</span>
            </div>
            <input type="range" id="scale-slider" min="25" max="200" value="100">

            <div class="custom-rotation">
                <label for="scale-input">Custom scale (%):</label>
                <input type="number" id="scale-input" placeholder="e.g. 150" min="25" max="500" step="1">
                <button id="apply-scale-btn" class="accent">Apply</button>
            </div>

            <div class="button-row wrap">
                <button id="reset-scale-btn" class="ghost">Reset Scale</button>
            </div>
        </div>
        -->

        <p id="selection-status" class="status"></p>
    </section>

    <section class="card">
        <h2>Layer Management</h2>
        <p class="muted">Quick isolation tools for ductwork layers.</p>
        <div class="layer-button-container">
            <div class="layer-buttons-left">
                <button id="isolate-parts-btn" class="secondary">Isolate Ductwork Parts</button>
                <button id="isolate-lines-btn" class="secondary">Isolate Ductwork Lines</button>
                <button id="create-layers-btn" class="success">Create Standard Layers</button>
                <button id="import-styles-btn" class="success">Import Graphic Styles</button>
            </div>
            <div class="layer-buttons-right">
                <button id="unlock-ductwork-btn" class="ghost"><img src="button_images/Unlock All Ductwork Layers.png" alt="">Unlock All Ductwork Layers</button>
            </div>
        </div>
        <p id="layer-status" class="status"></p>
        <p id="import-status" class="status"></p>
    </section>

    </main>
    <footer>
        <button id="reload-btn" class="ghost">Reload Panel</button>
        <span id="debug-status"></span>
    </footer>
</body>
</html>
